{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import'./actualite_page.css';import Home from\"../home\";import Image from\"../image_slider\";import Footer from\"../footer\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Informations(){const[newsData,setNewsData]=useState([]);const[error,setError]=useState(null);useEffect(()=>{const fetchInformations=async()=>{const token=localStorage.getItem('access_token');if(!token){setError('Vous devez être connecté pour voir les informations.');return;}try{const response=await fetch(\"http://127.0.0.1:8000/informations/\",{method:'GET',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});if(response.ok){const data=await response.json();setNewsData(data);}else{setError('Vous n\\'êtes pas autorisé à voir ces informations.');}}catch(error){console.error(\"Erreur lors de la récupération des informations :\",error);setError('Une erreur s\\'est produite lors de la récupération des informations.');}};fetchInformations();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Home,{}),/*#__PURE__*/_jsx(Image,{}),/*#__PURE__*/_jsxs(\"section\",{className:\"news-sections\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"news-headers\",children:\"INFORMATIONS\"}),error?/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}):newsData.map((item,index)=>/*#__PURE__*/_jsxs(\"article\",{className:\"news-articles\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"news-images\",loading:\"lazy\",src:item.image,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"news-contents\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"news-titles\",children:item.texte}),/*#__PURE__*/_jsx(\"p\",{className:\"news-details\",children:item.details}),/*#__PURE__*/_jsx(\"time\",{className:\"news-dates\",children:formatDate(item.date)})]})]},index))]}),/*#__PURE__*/_jsx(Footer,{})]});}// Fonction pour formater la date au format \"YYYY-MM-DD\"\nfunction formatDate(dateString){const date=new Date(dateString);const year=date.getFullYear();const month=('0'+(date.getMonth()+1)).slice(-2);// Ajoute un zéro devant si le mois est < 10\nconst day=('0'+date.getDate()).slice(-2);// Ajoute un zéro devant si le jour est < 10\nreturn\"\".concat(year,\"-\").concat(month,\"-\").concat(day);}export default Informations;","map":{"version":3,"names":["React","useState","useEffect","Home","Image","Footer","jsx","_jsx","jsxs","_jsxs","Informations","newsData","setNewsData","error","setError","fetchInformations","token","localStorage","getItem","response","fetch","method","headers","concat","ok","data","json","console","children","className","map","item","index","loading","src","image","alt","texte","details","formatDate","date","dateString","Date","year","getFullYear","month","getMonth","slice","day","getDate"],"sources":["C:/Users/azizs/OneDrive/Bureau/Mes Projets/Site/agriculture-site-web/regionale/src/page_admin/information_page.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport './actualite_page.css';\r\nimport Home from \"../home\";\r\nimport Image from \"../image_slider\";\r\nimport Footer from \"../footer\";\r\n\r\nfunction Informations() {\r\n    const [newsData, setNewsData] = useState([]);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchInformations = async () => {\r\n            const token = localStorage.getItem('access_token');\r\n\r\n            if (!token) {\r\n                setError('Vous devez être connecté pour voir les informations.');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const response = await fetch(\"http://127.0.0.1:8000/informations/\", {\r\n                    method: 'GET',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Authorization': `Bearer ${token}`,\r\n                    },\r\n                });\r\n\r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    setNewsData(data);\r\n                } else {\r\n                    setError('Vous n\\'êtes pas autorisé à voir ces informations.');\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Erreur lors de la récupération des informations :\", error);\r\n                setError('Une erreur s\\'est produite lors de la récupération des informations.');\r\n            }\r\n        };\r\n\r\n        fetchInformations();\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            <Home />\r\n            <Image />\r\n            <section className=\"news-sections\">\r\n                <header className=\"news-headers\">INFORMATIONS</header>\r\n                {error ? (\r\n                    <p className=\"error-message\">{error}</p>\r\n                ) : (\r\n                    newsData.map((item, index) => (\r\n                        <article className=\"news-articles\" key={index}>\r\n                            <img className=\"news-images\" loading=\"lazy\" src={item.image} alt=\"\" />\r\n                            <div className=\"news-contents\">\r\n                                <h2 className=\"news-titles\">{item.texte}</h2>\r\n                                <p className=\"news-details\">{item.details}</p>\r\n                                <time className=\"news-dates\">{formatDate(item.date)}</time>\r\n                            </div>\r\n                        </article>\r\n                    ))\r\n                )}\r\n            </section>\r\n            <Footer />\r\n        </div>\r\n    );\r\n}\r\n\r\n// Fonction pour formater la date au format \"YYYY-MM-DD\"\r\nfunction formatDate(dateString) {\r\n    const date = new Date(dateString);\r\n    const year = date.getFullYear();\r\n    const month = ('0' + (date.getMonth() + 1)).slice(-2); // Ajoute un zéro devant si le mois est < 10\r\n    const day = ('0' + date.getDate()).slice(-2); // Ajoute un zéro devant si le jour est < 10\r\n    return `${year}-${month}-${day}`;\r\n}\r\n\r\nexport default Informations;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,sBAAsB,CAC7B,MAAO,CAAAC,IAAI,KAAM,SAAS,CAC1B,MAAO,CAAAC,KAAK,KAAM,iBAAiB,CACnC,MAAO,CAAAC,MAAM,KAAM,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/B,QAAS,CAAAC,YAAYA,CAAA,CAAG,CACpB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAExCC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAa,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CAClC,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,CAElD,GAAI,CAACF,KAAK,CAAE,CACRF,QAAQ,CAAC,sDAAsD,CAAC,CAChE,OACJ,CAEA,GAAI,CACA,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,qCAAqC,CAAE,CAChEC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAC,MAAA,CAAYP,KAAK,CACpC,CACJ,CAAC,CAAC,CAEF,GAAIG,QAAQ,CAACK,EAAE,CAAE,CACb,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAClCd,WAAW,CAACa,IAAI,CAAC,CACrB,CAAC,IAAM,CACHX,QAAQ,CAAC,oDAAoD,CAAC,CAClE,CACJ,CAAE,MAAOD,KAAK,CAAE,CACZc,OAAO,CAACd,KAAK,CAAC,mDAAmD,CAAEA,KAAK,CAAC,CACzEC,QAAQ,CAAC,sEAAsE,CAAC,CACpF,CACJ,CAAC,CAEDC,iBAAiB,CAAC,CAAC,CACvB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACIN,KAAA,QAAAmB,QAAA,eACIrB,IAAA,CAACJ,IAAI,GAAE,CAAC,cACRI,IAAA,CAACH,KAAK,GAAE,CAAC,cACTK,KAAA,YAASoB,SAAS,CAAC,eAAe,CAAAD,QAAA,eAC9BrB,IAAA,WAAQsB,SAAS,CAAC,cAAc,CAAAD,QAAA,CAAC,cAAY,CAAQ,CAAC,CACrDf,KAAK,cACFN,IAAA,MAAGsB,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAEf,KAAK,CAAI,CAAC,CAExCF,QAAQ,CAACmB,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,gBACrBvB,KAAA,YAASoB,SAAS,CAAC,eAAe,CAAAD,QAAA,eAC9BrB,IAAA,QAAKsB,SAAS,CAAC,aAAa,CAACI,OAAO,CAAC,MAAM,CAACC,GAAG,CAAEH,IAAI,CAACI,KAAM,CAACC,GAAG,CAAC,EAAE,CAAE,CAAC,cACtE3B,KAAA,QAAKoB,SAAS,CAAC,eAAe,CAAAD,QAAA,eAC1BrB,IAAA,OAAIsB,SAAS,CAAC,aAAa,CAAAD,QAAA,CAAEG,IAAI,CAACM,KAAK,CAAK,CAAC,cAC7C9B,IAAA,MAAGsB,SAAS,CAAC,cAAc,CAAAD,QAAA,CAAEG,IAAI,CAACO,OAAO,CAAI,CAAC,cAC9C/B,IAAA,SAAMsB,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAEW,UAAU,CAACR,IAAI,CAACS,IAAI,CAAC,CAAO,CAAC,EAC1D,CAAC,GAN8BR,KAO/B,CACZ,CACJ,EACI,CAAC,cACVzB,IAAA,CAACF,MAAM,GAAE,CAAC,EACT,CAAC,CAEd,CAEA;AACA,QAAS,CAAAkC,UAAUA,CAACE,UAAU,CAAE,CAC5B,KAAM,CAAAD,IAAI,CAAG,GAAI,CAAAE,IAAI,CAACD,UAAU,CAAC,CACjC,KAAM,CAAAE,IAAI,CAAGH,IAAI,CAACI,WAAW,CAAC,CAAC,CAC/B,KAAM,CAAAC,KAAK,CAAG,CAAC,GAAG,EAAIL,IAAI,CAACM,QAAQ,CAAC,CAAC,CAAG,CAAC,CAAC,EAAEC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAE;AACvD,KAAM,CAAAC,GAAG,CAAG,CAAC,GAAG,CAAGR,IAAI,CAACS,OAAO,CAAC,CAAC,EAAEF,KAAK,CAAC,CAAC,CAAC,CAAC,CAAE;AAC9C,SAAAxB,MAAA,CAAUoB,IAAI,MAAApB,MAAA,CAAIsB,KAAK,MAAAtB,MAAA,CAAIyB,GAAG,EAClC,CAEA,cAAe,CAAAtC,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}