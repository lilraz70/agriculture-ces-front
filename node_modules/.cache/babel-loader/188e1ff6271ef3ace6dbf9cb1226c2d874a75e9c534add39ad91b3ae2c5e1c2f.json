{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import'./actualite_page.css';import Home from\"../home\";import Image from\"../image_slider\";import Footer from\"../footer\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Projects(){const[newsData,setNewsData]=useState([]);const[error,setError]=useState(null);useEffect(()=>{const fetchProjects=async()=>{const token=localStorage.getItem('access_token');if(!token){setError('Vous devez être connecté pour voir les projets.');return;}try{const response=await fetch(\"http://127.0.0.1:8000/projets/\",{method:'GET',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});if(response.ok){const data=await response.json();setNewsData(data);}else{setError('Vous n\\'êtes pas autorisé à voir ces projets.');}}catch(error){console.error(\"Erreur lors de la récupération des projets :\",error);setError('Une erreur s\\'est produite lors de la récupération des projets.');}};fetchProjects();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Home,{}),/*#__PURE__*/_jsx(Image,{}),/*#__PURE__*/_jsxs(\"section\",{className:\"news-sections\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"news-headers\",children:\"Projets\"}),error?/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}):newsData.map((item,index)=>/*#__PURE__*/_jsxs(\"article\",{className:\"news-articles\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"news-images\",loading:\"lazy\",src:item.image,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"news-contents\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"news-titles\",children:item.texte}),/*#__PURE__*/_jsx(\"p\",{className:\"news-details\",children:item.details}),/*#__PURE__*/_jsx(\"time\",{className:\"news-dates\",children:formatDate(item.date)}),item.file&&/*#__PURE__*/_jsx(\"a\",{className:\"download-link\",href:item.file,download:true,children:\"T\\xE9l\\xE9charger le fichier\"})]})]},index))]}),/*#__PURE__*/_jsx(Footer,{})]});}// Fonction pour formater la date au format \"YYYY-MM-DD\"\nfunction formatDate(dateString){const date=new Date(dateString);const year=date.getFullYear();const month=('0'+(date.getMonth()+1)).slice(-2);// Ajoute un zéro devant si le mois est < 10\nconst day=('0'+date.getDate()).slice(-2);// Ajoute un zéro devant si le jour est < 10\nreturn\"\".concat(year,\"-\").concat(month,\"-\").concat(day);}export default Projects;","map":{"version":3,"names":["React","useState","useEffect","Home","Image","Footer","jsx","_jsx","jsxs","_jsxs","Projects","newsData","setNewsData","error","setError","fetchProjects","token","localStorage","getItem","response","fetch","method","headers","concat","ok","data","json","console","children","className","map","item","index","loading","src","image","alt","texte","details","formatDate","date","file","href","download","dateString","Date","year","getFullYear","month","getMonth","slice","day","getDate"],"sources":["C:/Users/azizs/OneDrive/Bureau/Mes Projets/Site/agriculture-site-web/regionale/src/page_admin/projet_page.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport './actualite_page.css';\r\nimport Home from \"../home\";\r\nimport Image from \"../image_slider\";\r\nimport Footer from \"../footer\";\r\n\r\nfunction Projects() {\r\n    const [newsData, setNewsData] = useState([]);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchProjects = async () => {\r\n            const token = localStorage.getItem('access_token');\r\n\r\n            if (!token) {\r\n                setError('Vous devez être connecté pour voir les projets.');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const response = await fetch(\"http://127.0.0.1:8000/projets/\", {\r\n                    method: 'GET',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Authorization': `Bearer ${token}`,\r\n                    },\r\n                });\r\n\r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    setNewsData(data);\r\n                } else {\r\n                    setError('Vous n\\'êtes pas autorisé à voir ces projets.');\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Erreur lors de la récupération des projets :\", error);\r\n                setError('Une erreur s\\'est produite lors de la récupération des projets.');\r\n            }\r\n        };\r\n\r\n        fetchProjects();\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            <Home />\r\n            <Image />\r\n            <section className=\"news-sections\">\r\n                <header className=\"news-headers\">Projets</header>\r\n                {error ? (\r\n                    <p className=\"error-message\">{error}</p>\r\n                ) : (\r\n                    newsData.map((item, index) => (\r\n                        <article className=\"news-articles\" key={index}>\r\n    <img className=\"news-images\" loading=\"lazy\" src={item.image} alt=\"\" />\r\n    <div className=\"news-contents\">\r\n        <h2 className=\"news-titles\">{item.texte}</h2>\r\n        <p className=\"news-details\">{item.details}</p>\r\n        <time className=\"news-dates\">{formatDate(item.date)}</time>\r\n        {item.file && (\r\n            <a className=\"download-link\" href={item.file} download>\r\n                Télécharger le fichier\r\n            </a>\r\n        )}\r\n    </div>\r\n</article>\r\n\r\n                    ))\r\n                )}\r\n            </section>\r\n            <Footer />\r\n        </div>\r\n    );\r\n}\r\n\r\n// Fonction pour formater la date au format \"YYYY-MM-DD\"\r\nfunction formatDate(dateString) {\r\n    const date = new Date(dateString);\r\n    const year = date.getFullYear();\r\n    const month = ('0' + (date.getMonth() + 1)).slice(-2); // Ajoute un zéro devant si le mois est < 10\r\n    const day = ('0' + date.getDate()).slice(-2); // Ajoute un zéro devant si le jour est < 10\r\n    return `${year}-${month}-${day}`;\r\n}\r\n\r\nexport default Projects;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}