{"ast":null,"code":"import React,{useState,useEffect}from'react';import\"./information_bas.css\";import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function InformationBas(){const[actualites,setActualites]=useState([]);const[error,setError]=useState(null);useEffect(()=>{const fetchInformations=async()=>{const token=localStorage.getItem('access_token');if(!token){setError('Vous devez être connecté pour voir ces informations.');return;}try{const response=await fetch('http://127.0.0.1:8000/informations/',{method:'GET',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});if(response.ok){const data=await response.json();// Trier les actualités par date (supposons que la date est une chaîne au format ISO 8601)\ndata.sort((a,b)=>new Date(b.date)-new Date(a.date));// Mettre à jour l'état actualites avec les 2 dernières actualités\nsetActualites(data.slice(0,2));}else{setError('Vous n\\'êtes pas autorisé à voir ces informations.');}}catch(error){console.error(\"Erreur lors de la récupération des informations :\",error);setError('Une erreur s\\'est produite lors de la récupération des informations.');}};fetchInformations();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"containerse\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-wrappers\",children:error?/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}):actualites.map((item,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"card-column\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cards\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:\"\",className:\"cards-images\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"cards-titles\",children:item.texte}),/*#__PURE__*/_jsx(Link,{to:\"/info\",children:/*#__PURE__*/_jsx(\"button\",{className:\"card-button\",children:\"D\\xE9tails\"})})]})},index))})});}export default InformationBas;","map":{"version":3,"names":["React","useState","useEffect","Link","jsx","_jsx","jsxs","_jsxs","InformationBas","actualites","setActualites","error","setError","fetchInformations","token","localStorage","getItem","response","fetch","method","headers","concat","ok","data","json","sort","a","b","Date","date","slice","console","className","children","map","item","index","src","image","alt","texte","to"],"sources":["C:/Users/azizs/OneDrive/Bureau/Mes Projets/Site/agriculture-site-web/regionale/src/information_bas.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport \"./information_bas.css\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction InformationBas() {\r\n  const [actualites, setActualites] = useState([]);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchInformations = async () => {\r\n      const token = localStorage.getItem('access_token');\r\n\r\n      if (!token) {\r\n        setError('Vous devez être connecté pour voir ces informations.');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await fetch('http://127.0.0.1:8000/informations/', {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          // Trier les actualités par date (supposons que la date est une chaîne au format ISO 8601)\r\n          data.sort((a, b) => new Date(b.date) - new Date(a.date));\r\n          // Mettre à jour l'état actualites avec les 2 dernières actualités\r\n          setActualites(data.slice(0, 2));\r\n        } else {\r\n          setError('Vous n\\'êtes pas autorisé à voir ces informations.');\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Erreur lors de la récupération des informations :\", error);\r\n        setError('Une erreur s\\'est produite lors de la récupération des informations.');\r\n      }\r\n    };\r\n\r\n    fetchInformations();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"containerse\">\r\n      <div className=\"card-wrappers\">\r\n        {error ? (\r\n          <p className=\"error-message\">{error}</p>\r\n        ) : (\r\n          actualites.map((item, index) => (\r\n            <div className=\"card-column\" key={index}>\r\n              <div className=\"cards\">\r\n                <img src={item.image} alt='' className=\"cards-images\" />\r\n                <h3 className=\"cards-titles\">{item.texte}</h3>\r\n                <Link to=\"/info\">\r\n                  <button className=\"card-button\">Détails</button>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InformationBas;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,uBAAuB,CAC9B,OAASC,IAAI,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExC,QAAS,CAAAC,cAAcA,CAAA,CAAG,CACxB,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACU,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAExCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAW,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,CAElD,GAAI,CAACF,KAAK,CAAE,CACVF,QAAQ,CAAC,sDAAsD,CAAC,CAChE,OACF,CAEA,GAAI,CACF,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,qCAAqC,CAAE,CAClEC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAC,MAAA,CAAYP,KAAK,CAClC,CACF,CAAC,CAAC,CAEF,GAAIG,QAAQ,CAACK,EAAE,CAAE,CACf,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAClC;AACAD,IAAI,CAACE,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,GAAI,CAAAC,IAAI,CAACD,CAAC,CAACE,IAAI,CAAC,CAAG,GAAI,CAAAD,IAAI,CAACF,CAAC,CAACG,IAAI,CAAC,CAAC,CACxD;AACAnB,aAAa,CAACa,IAAI,CAACO,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CACjC,CAAC,IAAM,CACLlB,QAAQ,CAAC,oDAAoD,CAAC,CAChE,CACF,CAAE,MAAOD,KAAK,CAAE,CACdoB,OAAO,CAACpB,KAAK,CAAC,mDAAmD,CAAEA,KAAK,CAAC,CACzEC,QAAQ,CAAC,sEAAsE,CAAC,CAClF,CACF,CAAC,CAEDC,iBAAiB,CAAC,CAAC,CACrB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACER,IAAA,QAAK2B,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC1B5B,IAAA,QAAK2B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAC3BtB,KAAK,cACJN,IAAA,MAAG2B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEtB,KAAK,CAAI,CAAC,CAExCF,UAAU,CAACyB,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,gBACzB/B,IAAA,QAAK2B,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC1B1B,KAAA,QAAKyB,SAAS,CAAC,OAAO,CAAAC,QAAA,eACpB5B,IAAA,QAAKgC,GAAG,CAAEF,IAAI,CAACG,KAAM,CAACC,GAAG,CAAC,EAAE,CAACP,SAAS,CAAC,cAAc,CAAE,CAAC,cACxD3B,IAAA,OAAI2B,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEE,IAAI,CAACK,KAAK,CAAK,CAAC,cAC9CnC,IAAA,CAACF,IAAI,EAACsC,EAAE,CAAC,OAAO,CAAAR,QAAA,cACd5B,IAAA,WAAQ2B,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,YAAO,CAAQ,CAAC,CAC5C,CAAC,EACJ,CAAC,EAP0BG,KAQ7B,CACN,CACF,CACE,CAAC,CACH,CAAC,CAEV,CAEA,cAAe,CAAA5B,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}